# Команды psql

← [Назад][back]

| Команды                                                              | Описание                                                                                                                                                                                                                                                                                                                |
|----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Общие**                                                            |                                                                                                                                                                                                                                                                                                                         |
| `\bind [ПАРАМЕТР]...`                                                | задать параметры запроса                                                                                                                                                                                                                                                                                                |
| `\copyright`                                                         | условия использования и распространения PostgreSQL                                                                                                                                                                                                                                                                      |
| `\crosstabview [СТОЛБЦЫ]`                                            | выполнить запрос и вывести результат в перекрёстном виде                                                                                                                                                                                                                                                                |
| `\errverbose`                                                        | вывести максимально подробное сообщение о последней ошибке                                                                                                                                                                                                                                                              |
| `\g [(ПАРАМЕТРЫ)] [ФАЙЛ]`                                            | выполнить запрос (и направить результат в файл или канал `\|`); `\g` без аргументов равнозначно `;`                                                                                                                                                                                                                     |
| `\gdesc`                                                             | описать результат запроса, но не выполнять его                                                                                                                                                                                                                                                                          |
| `\gexec`                                                             | выполнить запрос, а затем выполнить каждую строку в результате                                                                                                                                                                                                                                                          |
| `\gset [ПРЕФИКС]`                                                    | выполнить запрос и сохранить результат в переменных psql                                                                                                                                                                                                                                                                |
| `\gx [(ПАРАМЕТРЫ)] [ФАЙЛ]`                                           | то же, что `\g`, но в режиме развёрнутого вывода выйти из psql                                                                                                                                                                                                                                                          |
| `\watch [[i=]СЕК] [c=N]`                                             | повторять запрос через заданное число секунд, не более `N` раз                                                                                                                                                                                                                                                          |
| **Справка**                                                          |                                                                                                                                                                                                                                                                                                                         |
| `\? [commands]`                                                      | справка по командам psql c `\`                                                                                                                                                                                                                                                                                          |
| `\? options`                                                         | справка по параметрам командной строки psql                                                                                                                                                                                                                                                                             |
| `\? variables`                                                       | справка по специальным переменным                                                                                                                                                                                                                                                                                       |
| `\h [ИМЯ]`                                                           | справка по заданному SQL-оператору; `*` - по всем                                                                                                                                                                                                                                                                       |
| **Буфер запроса**                                                    |                                                                                                                                                                                                                                                                                                                         |
| `\e [ФАЙЛ] [СТРОКА]`                                                 | править буфер запроса (или файл) во внешнем редакторе                                                                                                                                                                                                                                                                   |
| `\ef [ФУНКЦИЯ [СТРОКА]]`                                             | править определение функции во внешнем редакторе                                                                                                                                                                                                                                                                        |
| `\ev [VIEWNAME [LINE]]`                                              | править определение представления во внешнем редакторе                                                                                                                                                                                                                                                                  |
| `\p`                                                                 | вывести содержимое буфера запросов                                                                                                                                                                                                                                                                                      |
| `\r`                                                                 | очистить буфер запроса                                                                                                                                                                                                                                                                                                  |
| `\w ФАЙЛ`                                                            | записать буфер запроса в файл                                                                                                                                                                                                                                                                                           |
| **Ввод/Вывод**                                                       |                                                                                                                                                                                                                                                                                                                         |
| `\copy ...`                                                          | выполнить `SQL COPY` на стороне клиента                                                                                                                                                                                                                                                                                 |
| `\echo [-n] [СТРОКА]`                                                | записать строку в поток стандартного вывода (`-n` отключает перевод строки)                                                                                                                                                                                                                                             |
| `\i ФАЙЛ`                                                            | выполнить команды из файла                                                                                                                                                                                                                                                                                              |
| `\ir ФАЙЛ`                                                           | подобно `\i`, но путь задаётся относительно текущего скрипта                                                                                                                                                                                                                                                            |
| `\o [ФАЙЛ]`                                                          | выводить все результаты запросов в файл или канал `\|`                                                                                                                                                                                                                                                                  |
| `\qecho [-n] [СТРОКА]`                                               | записать строку в выходной поток `\o` (`-n` отключает перевод строки)                                                                                                                                                                                                                                                   |
| `\warn [-n] [СТРОКА]`                                                | записать строку в поток вывода ошибок (`-n` отключает перевод строки)                                                                                                                                                                                                                                                   |
| **Условия**                                                          |                                                                                                                                                                                                                                                                                                                         |
| `\if ВЫРАЖЕНИЕ`                                                      | начало блока условия                                                                                                                                                                                                                                                                                                    |
| `\elif ВЫРАЖЕНИЕ`                                                    | альтернативная ветвь в текущем блоке условия                                                                                                                                                                                                                                                                            |
| `\else`                                                              | окончательная ветвь в текущем блоке условия                                                                                                                                                                                                                                                                             |
| `\endif`                                                             | конец блока условия                                                                                                                                                                                                                                                                                                     |
| **Информационные**                                                   |                                                                                                                                                                                                                                                                                                                         |
| _дополнения:_                                                        |                                                                                                                                                                                                                                                                                                                         |
| _`S` = показывать системные объекты_                                 |                                                                                                                                                                                                                                                                                                                         |
| _`+` = дополнительные подробности_                                   |                                                                                                                                                                                                                                                                                                                         |
| `\d[S+]`                                                             | список таблиц, представлений и последовательностей                                                                                                                                                                                                                                                                      |
| `\d[S+] ИМЯ`                                                         | описание таблицы, представления, последовательности или индекса                                                                                                                                                                                                                                                         |
| `\da[S] [МАСКА]`                                                     | список агрегатных функций                                                                                                                                                                                                                                                                                               |
| `\dA[+] [МАСКА]`                                                     | список методов доступа                                                                                                                                                                                                                                                                                                  |
| `\dAc[+] [МСК_МД [МСК_ТИПА]]`                                        | список классов операторов                                                                                                                                                                                                                                                                                               |
| `\dAf[+] [МСК_МД [МСК_ТИПА]]`                                        | список семейств операторов                                                                                                                                                                                                                                                                                              |
| `\dAo[+] [МСК_МД [МСК_СОП]]`                                         | список операторов из семейств операторов                                                                                                                                                                                                                                                                                |
| `\dAp[+] [МСК_МД [МСК_СОП]]`                                         | список опорных функций из семейств                                                                                                                                                                                                                                                                                      |
| `\db[+] [МАСКА]`                                                     | список табличных пространств                                                                                                                                                                                                                                                                                            |
| `\dc[S+] [МАСКА]`                                                    | список преобразований                                                                                                                                                                                                                                                                                                   |
| `\dconfig[+] [МАСКА]`                                                | список параметров конфигурации                                                                                                                                                                                                                                                                                          |
| `\dC[+] [МАСКА]`                                                     | список приведений типов                                                                                                                                                                                                                                                                                                 |
| `\dd[S] [МАСКА]`                                                     | описания объектов, не выводимые в других режимах                                                                                                                                                                                                                                                                        |
| `\dD[S+] [МАСКА]`                                                    | список доменов                                                                                                                                                                                                                                                                                                          |
| `\ddp [МАСКА]`                                                       | список прав по умолчанию                                                                                                                                                                                                                                                                                                |
| `\dE[S+] [МАСКА]`                                                    | список сторонних таблиц                                                                                                                                                                                                                                                                                                 |
| `\des[+] [МАСКА]`                                                    | список сторонних серверов                                                                                                                                                                                                                                                                                               |
| `\det[+] [МАСКА]`                                                    | список сторонних таблиц                                                                                                                                                                                                                                                                                                 |
| `\deu[+] [МАСКА]`                                                    | список сопоставлений пользователей                                                                                                                                                                                                                                                                                      |
| `\dew[+] [МАСКА]`                                                    | список обёрток сторонних данных                                                                                                                                                                                                                                                                                         |
| `\df[anptw][S+] [МСК_ФУНК [МСК_ТИПА ...]]`                           | список функций `[только агрегатных/обычных/процедур/триггеров/оконных]`                                                                                                                                                                                                                                                 |
| `\dF[+] [МАСКА]`                                                     | список конфигураций текстового поиска                                                                                                                                                                                                                                                                                   |
| `\dFd[+] [МАСКА]`                                                    | список словарей текстового поиска                                                                                                                                                                                                                                                                                       |
| `\dFp[+] [МАСКА]`                                                    | список анализаторов текстового поиска                                                                                                                                                                                                                                                                                   |
| `\dFt[+] [МАСКА]`                                                    | список шаблонов текстового поиска                                                                                                                                                                                                                                                                                       |
| `\dg[S+] [МАСКА]`                                                    | список ролей                                                                                                                                                                                                                                                                                                            |
| `\di[S+] [МАСКА]`                                                    | список индексов                                                                                                                                                                                                                                                                                                         |
| `\dl[+]`                                                             | список больших объектов (то же, что и `\lo_list`)                                                                                                                                                                                                                                                                       |
| `\dL[S+] [МАСКА]`                                                    | список языков процедур                                                                                                                                                                                                                                                                                                  |
| `\dm[S+] [МАСКА]`                                                    | список материализованных представлений                                                                                                                                                                                                                                                                                  |
| `\dn[S+] [МАСКА]`                                                    | список схем                                                                                                                                                                                                                                                                                                             |
| `\do[S+] [МСК_ОП [МСК_ТИПА [МСК_ТИПА]]]`                             | список операторов                                                                                                                                                                                                                                                                                                       |
| `\dO[S+] [МАСКА]`                                                    | список правил сортировки                                                                                                                                                                                                                                                                                                |
| `\dp[S] [МАСКА]`                                                     | список прав доступа к таблицам, представлениям и последовательностям                                                                                                                                                                                                                                                    |
| `\dP[itn+] [МАСКА]`                                                  | список секционированных отношений `[только индексов (i)/таблиц (t)]`, с вложенностью `(n)`                                                                                                                                                                                                                              |
| `\drds [МСК_РОЛИ [МСК_БД]]`                                          | список параметров роли на уровне БД                                                                                                                                                                                                                                                                                     |
| `\drg[S] [МАСКА]`                                                    | список назначений ролей                                                                                                                                                                                                                                                                                                 |
| `\dRp[+] [МАСКА]`                                                    | список публикаций для репликации                                                                                                                                                                                                                                                                                        |
| `\dRs[+] [МАСКА]`                                                    | список подписок на репликацию                                                                                                                                                                                                                                                                                           |
| `\ds[S+] [МАСКА]`                                                    | список последовательностей                                                                                                                                                                                                                                                                                              |
| `\dt[S+] [МАСКА]`                                                    | список таблиц                                                                                                                                                                                                                                                                                                           |
| `\dT[S+] [МАСКА]`                                                    | список типов данных                                                                                                                                                                                                                                                                                                     |
| `\du[S+] [МАСКА]`                                                    | список ролей                                                                                                                                                                                                                                                                                                            |
| `\dv[S+] [МАСКА]`                                                    | список представлений                                                                                                                                                                                                                                                                                                    |
| `\dx[+] [МАСКА]`                                                     | список расширений                                                                                                                                                                                                                                                                                                       |
| `\dX [МАСКА]`                                                        | список расширенных статистик                                                                                                                                                                                                                                                                                            |
| `\dy[+] [МАСКА]`                                                     | список событийных триггеров                                                                                                                                                                                                                                                                                             |
| `\l[+] [МАСКА]`                                                      | список баз данных                                                                                                                                                                                                                                                                                                       |
| `\sf[+] ИМЯ_ФУНКЦИИ`                                                 | показать определение функции                                                                                                                                                                                                                                                                                            |
| `\sv[+] ИМЯ_ПРЕДСТ`                                                  | показать определение представления                                                                                                                                                                                                                                                                                      |
| `\z[S] [МАСКА]`                                                      | то же, что и `\dp`                                                                                                                                                                                                                                                                                                      |
| **Большие объекты**                                                  |                                                                                                                                                                                                                                                                                                                         |
| `\lo_export OID_БО ФАЙЛ`                                             | записать большой объект в файл                                                                                                                                                                                                                                                                                          |
| `\lo_import ФАЙЛ [КОММЕНТАРИЙ]`                                      | прочитать большой объект из файла                                                                                                                                                                                                                                                                                       |
| `\lo_list[+]`                                                        | список больших объектов                                                                                                                                                                                                                                                                                                 |
| `\lo_unlink OID_БО`                                                  | удалить большой объект                                                                                                                                                                                                                                                                                                  |
| **Форматирование**                                                   |                                                                                                                                                                                                                                                                                                                         |
| `\a`                                                                 | переключение режимов вывода: неформатированный/выровненный                                                                                                                                                                                                                                                              |
| `\C [СТРОКА]`                                                        | задать заголовок таблицы или убрать, если не задан показать или установить разделитель полей для неформатированного вывода                                                                                                                                                                                              |
| `\H`                                                                 | переключить режим вывода в HTML (текущий: выкл.)                                                                                                                                                                                                                                                                        |
| `\pset [ИМЯ [ЗНАЧЕНИЕ]]`                                             | установить параметр вывода таблицы (`border\|columns\|csv_fieldsep\|expanded\|fieldsep\|fieldsep_zero\|footer\|format\|linestyle\|null\|numericlocale\|pager\|pager_min_lines\|recordsep\|recordsep_zero\|tableattr\|title\|tuples_only\|unicode_border_linestyle\|unicode_column_linestyle\|unicode_header_linestyle`) |
| `\t [on\|off]`                                                       | режим вывода только строк (сейчас: выкл.)                                                                                                                                                                                                                                                                               |
| `\T [СТРОКА]`                                                        | задать атрибуты для `<table>` или убрать, если не заданы                                                                                                                                                                                                                                                                |
| `\x [on\|off\|auto]`                                                 | переключить режим расширенного вывода (сейчас: выкл.)                                                                                                                                                                                                                                                                   |
| **Соединение**                                                       |                                                                                                                                                                                                                                                                                                                         |
| `\c[onnect] {[БД\|- ПОЛЬЗОВАТЕЛЬ\|- СЕРВЕР\|- ПОРТ\|-] \| conninfo}` | подключиться к другой базе данных (текущая: "postgres")                                                                                                                                                                                                                                                                 |
| `\conninfo`                                                          | информация о текущем соединении                                                                                                                                                                                                                                                                                         |
| `\encoding [КОДИРОВКА]`                                              | показать/установить клиентскую кодировку                                                                                                                                                                                                                                                                                |
| `\password [ИМЯ]`                                                    | безопасно сменить пароль пользователя                                                                                                                                                                                                                                                                                   |
| **Операционная система**                                             |                                                                                                                                                                                                                                                                                                                         |
| `\cd [ПУТЬ]`                                                         | сменить текущий каталог                                                                                                                                                                                                                                                                                                 |
| `\getenv ПЕР_PSQL ПЕР_ОКР`                                           | прочитать переменную окружения                                                                                                                                                                                                                                                                                          |
| `\setenv ИМЯ [ЗНАЧЕНИЕ]`                                             | установить или сбросить переменную окружения                                                                                                                                                                                                                                                                            |
| `\timing [on\|off]`                                                  | включить/выключить секундомер (сейчас: выкл.)                                                                                                                                                                                                                                                                           |
| `\! [КОМАНДА]`                                                       | выполнить команду в командной оболочке или запустить интерактивную оболочку                                                                                                                                                                                                                                             |
| **Переменные**                                                       |                                                                                                                                                                                                                                                                                                                         |
| `\prompt [ТЕКСТ] ИМЯ`                                                | предложить пользователю задать внутреннюю переменную                                                                                                                                                                                                                                                                    |
| `\set [ИМЯ [ЗНАЧЕНИЕ]]`                                              | установить внутреннюю переменную или вывести все, если имя не задано                                                                                                                                                                                                                                                    |
| `\unset ИМЯ`                                                         | сбросить (удалить) внутреннюю переменную                                                                                                                                                                                                                                                                                |

---

← [Назад][back]

[back]: <.> "Назад к оглавлению"