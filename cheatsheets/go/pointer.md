--------------------------------------------------
Указатели
--------------------------------------------------
package main

import "fmt"

func main() { var x int = 4 // определяем переменную или x := 4 var p *int = &x // указатель получает адрес переменной
или p := &x fmt.Println("Address:", p)      // Address: 0xc0420c058 - значение самого указателя - адрес переменной x
fmt.Println("Value:", *p)       // Value: 4 - значение переменной x (разыменования)
*p = 25 // меняем значение по адресу, который хранится в указателе fmt.Println(x)                  // 25 }

--------------------------------------------------
Пустой указатель
--------------------------------------------------
var pf *float64 fmt.Println("Value:", *pf)          // ! ошибка, указатель не указывает на какой-либо объект

if pf != nil { // проверка на значение nil fmt.Println("Value:", *pf)
}

--------------------------------------------------
Функция new(type)
--------------------------------------------------
В эту функцию передается тип, объект которого надо создать. Функция возвращает указатель на созданный объект:

package main

import "fmt"

func main() { p := new(int)
fmt.Println("Value:", *p)       // Value: 0 - значение по умолчанию
*p = 8 // изменяем значение fmt.Println("Value:", *p)       // Value: 8 }

--------------------------------------------------
Указатели как параметры функции
--------------------------------------------------
package main

import "fmt"

func changeValue(x *int) {
*x = (*x) * (*x)
}

func main() { d := 5 fmt.Println("d before:", d)     // 5 changeValue(&d)                 // изменяем значение
fmt.Println("d after:", d)      // 25 - значение изменилось!
}

--------------------------------------------------
Указатель как результат функции
--------------------------------------------------
package main

import "fmt"

func createPointer(x int) *int { p := new(int)
*p = x return p }

func main() { p1 := createPointer(7)
fmt.Println("p1:", *p1)     // p1: 7 p2 := createPointer(10)
fmt.Println("p2:", *p2)     // p2: 10 }